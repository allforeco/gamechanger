{% extends "base_generic.html" %}

{% block title %}
      <title>Event Overview - Gamechanger Action Tracker</title>
{% endblock %}

{% block content %}
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

  <div>
    <h2 style="margin-bottom: 0.25em;">Latest Events</h2>
    <table>
      <thead>
        <tr>
          <th sort="dat-true">Date</th>
          <th>Map</th>
          <th sort="str-false">Location</th>
          <th sort="str-false">Host</th>
          <th sort="int-false">Participants</th>
          <th>Photo</th>
        </tr>
      </thead>
      <tbody>
        {% for event in event_list %}
      <tr>
        <td> 
          <span>{{event.date|date:'d-m-Y'}}</span>
        </td>
        {% if event.gathering.location %}
        <td style="text-align: center;">
          <a href="https://map.fridaysforfuture.org/?e={{event.gathering.regid}}">üåê</a>
        </td>
        <td>
          <a href="{% url 'action:geo_view' event.gathering.location.id %}">{{event.gathering.location.name}}</a>
        </td>
        {% else %}
        <td style="text-align: center;">
          ‚ùå
        </td>
        <td class="Unknown Place">
          <span>Unknown Place</span>
        </td>
        {% endif %}
        {% if event.organization %}
        <td class="{{event.organization}}">
          <span>{{event.organization}}</span>
        </td>
        {% else %}
        <td>
          <span hidden="true">z-sort</span>
        </td>
        {% endif %}
        <td style="text-align: right;" class="{{event.participants}}">
          {% if event.participants %}
          <span>{{event.participants}}</span>
          {% else %}
          <span>?</span>
          {% endif %}
        </td>
        <td>
          {% if witness.proof_url %}
            <a href="{{ event.gathering.proof_url }}">Photo</a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  <div>
    <h2 style="margin-bottom: 0.25em;">Reports Leaderboard</h2>
    <table>
      <thead>
        <th sort="str-false">Country</th>
        <th sort="int-true">Reports</th>
      </thead>
      {% for location, reports, locid in leaderboard_list %}
      <tr>
        <td><a href="{% url 'action:geo_view' locid %}" >{{location}}</a></td>
        <td><span>{{reports}}</span></td>
      </tr>
      {% endfor %}
    </table>
  </div>
{% endblock %}